/*! indexedDBmock 31-03-2015 */
!function(a){function b(a){if("number"==typeof a&&!isNaN(a)||"string"==typeof a||a instanceof Date&&!isNaN(a))return!0;if(a instanceof Array){for(var c=a.length-1;c>=0;c--)if(!b(a[c]))return!1;return!0}return!1}var c=1,d={},e={open:function(a,b){var e,k={};for(var l in d)l===a&&(e=d[l]);e||(b||(b=1),e=new g(a),d[a]=e);var m=new h(e);return b&&m.version>b?setTimeout(function(){"function"==typeof k.onerror&&(k.target=k,k.target.errorCode="VersionError",k.target.error={name:"VersionError"},k.target.readyState="done",k.onerror(k))},c):b&&m.version<b?setTimeout(function(){k.target=k,k.target.readyState="done",k.target.type="upgradeneeded",k.target.newVersion=b,k.target.oldVersion=m.version,k.target.transaction=new j(null,f.VERSIONCHANGE,new i(e,m)),k.target.transaction.db.version=b,m.version=b,e.version=b,"function"==typeof k.onupgradeneeded&&(k.onupgradeneeded(k),k.target.transaction.__commit()),setTimeout(function(){k.target.transaction._aborted?"function"==typeof k.onerror&&(k.target=k,k.target.errorCode=8,k.target.error={name:"AbortError",message:"The transaction was aborted."},k.target.readyState="done",k.onerror(k)):"function"==typeof k.onsuccess&&(k.target=k,k.target.result=m,k.target.readyState="done",e.connections.push(m),k.onsuccess(k));for(var a=0;a<e.connections.length;a++)e.connections[a]._connectionId!==m._connectionId&&"function"==typeof e.connections[a].onversionchange&&(e.connections[a].target=e.connections[a],e.connections[a].target.readyState="done",e.connections[a].target.type=f.VERSIONCHANGE,e.connections[a].target.version=b,e.connections[a].onversionchange(e.connections[a]))},c)},c):setTimeout(function(){"function"==typeof k.onsuccess&&(k.target=k,k.target.result=m,k.target.readyState="done",e.connections.push(m),k.onsuccess(k))},c),k},deleteDatabase:function(a){var b={};for(var e in d)e===a&&(d[e]=void 0,delete d[e]);return setTimeout(function(){"function"==typeof b.onsuccess&&(b.target=b,b.target.readyState="done",b.onsuccess(b))},c),b},cmp:function(){}},f={READONLY:"readonly",READWRITE:"readwrite",VERSIONCHANGE:"versionchange"},g=function(a){this.name=a,this.version=0,this.objectStoreNames=[],this.objectStores=[],this.connections=[],this.transactions=[]},h=function(a){this.name=a.name,this.version=a.version,this.objectStoreNames=a.objectStoreNames,this._connectionId=a.connections.length,this._db=a},i=function(a,b){this.name=a.name,this.version=a.version,this.objectStoreNames=a.objectStoreNames,this._db=a,this._connection=b,this._objectStores=a.objectStores||[]},j=function(a,b,c){if(this.db=c,this.__active=!0,this._aborted=!1,this.__actions=[],b||(b=f.READONLY),b!==f.VERSIONCHANGE&&(!a||0===a.length))throw this.aborted=!0,this.__checkFinished(this),{name:"InvalidAccessError"};if(b!==f.READONLY&&b!==f.READWRITE&&b!==f.VERSIONCHANGE&&(b=f.READONLY),a)for(var d=0;d<a.length;d++){for(var e=!1,g=0;g<c.objectStoreNames.length;g++)c.objectStoreNames[g]===a[d]&&(e=!0);if(!e)throw this.aborted=!0,this.__checkFinished(this),{name:"NotFoundError"}}this.mode=b,this.objectStoreNames=a,this.db.transaction=this,this.__checkFinished(this)},k=function(a,b,c){this.name=a,this.keyPath=b?b.keyPath:void 0,this.autoIncrement=b?b.autoIncrement:void 0,this.indexNames=[],this.transaction=c,this._indexes=[],this.__data={},this.__actions=[],this.__latestKey=0},l=function(){},m=function(a,b,c,d){this.name=a,this.keyPath=b,this.multiEntry=c?c.multiEntry:void 0,this.unique=c?c.unique:void 0,this.objectStore=d,this.__data={}},n=function(a,b,c,d){this.lower=a,this.upper=b,this.lowerOpen=c?c:!1,this.upperOpen=d?d:!1};h.prototype=function(){function a(){for(var a=0;a<this._db.connections.length;a++)this._db.connections[a].connectionId===this._connectionId&&this._db.connections.splice(a,1)}function b(a,b){var c=new j(a,b,new i(this._db,this));return c}return{close:a,transaction:b}}(),i.prototype=function(){function a(){this._connection.close()}function b(){this._db.objectStores=this._objectStores,this._db.objectStoreNames=this.objectStoreNames}function c(a,b){return this._connection.transaction(a,b)}function d(a,b){if(this.transaction.mode!==f.VERSIONCHANGE)throw{name:"InvalidStateError"};if(b&&b.keyPath instanceof Array)for(var c=0;c<b.keyPath.length;c++)if(""===b.keyPath[c])throw this.transaction.abort(),{name:"InvalidAccessError"};var d=new k(a,b,this.transaction);return this._objectStores.push(d),this.objectStoreNames.push(a),d}function e(a){if(this.transaction.mode!==f.VERSIONCHANGE)throw{name:"InvalidStateError"};for(var b=!1,c=0;c<this.objectStoreNames.length;c++)this.objectStoreNames[c]===a&&(this.objectStoreNames.splice(c,1),b=!0);if(!b)throw{name:"NotFoundError"};for(var d=0;d<this._objectStores.length;d++)this._objectStores[d].name===a&&this._objectStores.splice(d,1)}return{close:a,transaction:c,createObjectStore:d,deleteObjectStore:e,__commit:b}}(),j.prototype=function(){function a(){for(var a=0;a<this.db._objectStores.length;a++){var b=(new Date).getTime();this.__actions.push(b),g(this,this.db._objectStores[a],b)}}function b(a){a._aborted||a.__commited||(a.__commited=!0,"readonly"!=this.mode&&a.db.__commit(),a.__active=!1,"function"==typeof a.oncomplete&&(a.target=a,a.target.result=a,a.target.readyState="done",a.oncomplete(a)))}function d(a){this._aborted=!0,a||(a={name:"AbortError",message:"The transaction was aborted."});var b=this;setTimeout(function(){"function"==typeof b.onabort&&(b.target=b,b.target.errorCode=8,b.target.error=a,b.target.readyState="done",b.onabort(b))},c)}function e(a){var b=(new Date).getTime();if(this.__actions.push(b),this.mode!==f.VERSIONCHANGE){for(var c=!1,d=0;d<this.objectStoreNames.length;d++)this.objectStoreNames[d]===a&&(c=!0);if(!c)throw this.__actions.splice(this.__actions.indexOf(b),1),g(this,void 0,b),{name:"NotFoundError"}}for(var e=0;e<this.db._objectStores.length;e++)if(this.db._objectStores[e].name===a){var h=this.db._objectStores[e];return h.transaction=this,g(this,h,b),h}throw this.__actions.splice(this.__actions.indexOf(b),1),g(this,void 0,b),{name:"NotFoundError"}}function g(a,d,e){setTimeout(function(){d?d.__finished()?(a.__actions.splice(a.__actions.indexOf(e),1),0===a.__actions.length&&b(a)):g(a,d,e):0===a.__actions.length&&b(a)},c)}return{abort:d,objectStore:e,__commit:a,__checkFinished:g}}(),k.prototype=function(){function a(a){return"Object"===a.constructor.name}function d(a){var b={};return a&&"[object Function]"===b.toString.call(a)}function e(a,b){for(var c=b.split("."),d=a,e=0;e<c.length;e++)d&&(d=d[c[e]]);return d}function g(a,b,c){for(var d=b.split("."),e=a,f=0;f<d.length;f++)f!=d.length-1?(e[d[f]]={},e=e[d[f]]):e[d[f]]=c;return e}function h(b){for(var c in b){if(d(b[c]))return!0;if(a(c)&&h(b[c]))return!0}return!1}function i(a){var d=(new Date).getTime(),e=this;e.__actions.push(d);var f={};-1==e.transaction.db.objectStoreNames.indexOf(e.name)&&l(e,f,{name:"InvalidStateError"}),b(a)||l(e,f,{name:"DataError"});var g=e.__data[a];return setTimeout(function(){"function"==typeof f.onsuccess&&(f.target=f,f.target.result=g,f.target.readyState="done",f.onsuccess(f)),e.__actions.splice(e.__actions.indexOf(d),1)},c),f}function j(a,b){return o(this,a,b,!1)}function k(a,b){return o(this,a,b,!0)}function l(a,b,d){return setTimeout(function(){"function"==typeof b.onerror&&(b.target=b,b.target.readyState="done",b.target.error=d,b.onerror(b)),"function"==typeof a.transaction.onerror&&(a.transaction.target=a.transaction,a.transaction.target.readyState="done",a.transaction.target.error=d,a.transaction.onerror(a.transaction)),a.transaction.abort(d)},c),b}function n(a,b,c){throw c&&a.__actions.splice(a.__actions.indexOf(c),1),b}function o(d,i,j,k){var m=(new Date).getTime();d.__actions.push(m);var o={},p=j;if(-1==d.transaction.db.objectStoreNames.indexOf(d.name)&&n(d,{name:"InvalidStateError"},m),d.transaction.mode==f.READONLY&&n(d,{name:"ReadOnlyError"},m),(!d.keyPath&&!j&&!d.autoIncrement||d.keyPath&&(j||!i[d.keyPath]&&!d.autoIncrement||!a(i)))&&n(d,{name:"DataError"},m),d.autoIncrement){if(p&&"number"==typeof p&&p>d.__latestKey||(p=d.__latestKey+1,d.keyPath&&g(i,d.keyPath,p)),p>9007199254740992)return l(d,o,{name:"ConstraintError"});d.__latestKey=p}else d.keyPath&&(p=e(i,d.keyPath));if(b(p)||n(d,{name:"DataError"},m),k&&d.__data[p])return l(d,o,{name:"ConstraintError"});h(i)&&n(d,{name:"DataCloneError"},m);for(var q=0;q<d._indexes.length;q++){var r=d._indexes[q],s=e(i,r.keyPath);if(s)if(r.multiEntry&&s instanceof Array){for(var t={},u=0;u<s.length;u++)if(b(s[u])&&!t[s[u]]&&(t[s[u]]=s[u],r.unique&&r.__data[s[u]]))return l(d,o,{name:"ConstraintError"})}else{if(!b(s))continue;if(r.unique&&r.__data[s])return l(d,o,{name:"ConstraintError"})}}for(var v=0;v<d._indexes.length;v++){var w=d._indexes[v];if(!k)for(var x=0;x<w.__data.length;x++)for(var y=0;y<w.__data[x].length;y++)w.__data[x][y].key==j&&w.__data[x].splice(y,1);var z=e(i,w.keyPath);if(z)if(w.multiEntry&&z instanceof Array)for(var A={},B=0;B<z.length;B++)b(z[B])&&!A[z[B]]&&(A[z[B]]=z[B],w.__data[z[B]]||(w.__data[z[B]]=[]),w.__data[z[B]].push({key:j,data:i}));else{if(!b(z))continue;w.__data[z]||(w.__data[z]=[]),w.__data[z].push({key:j,data:i})}}return d.__data[p]=i,setTimeout(function(){"function"==typeof o.onsuccess&&(o.target=o,o.target.result=p,o.target.readyState="done",o.onsuccess(o)),d.__actions.splice(d.__actions.indexOf(m),1)},c),o}function p(a,b,c){if(this.transaction.mode!==f.VERSIONCHANGE&&n(this,{name:"InvalidStateError"}),b&&b instanceof Array)for(var d=0;d<b.length;d++)""===b[d]&&n(this,{name:"InvalidStateError"});var e=new m(a,b,c,this);return this._indexes.push(e),this.indexNames.push(a),e}function q(a){this.transaction.mode!==f.VERSIONCHANGE&&n(this,{name:"InvalidStateError"});for(var b=!1,c=0;c<this.indexNames.length;c++)this.indexNames[c]===a&&(this.indexNames.splice(c,1),b=!0);b||n(this,{name:"NotFoundError"});for(var d=0;d<this._indexes.length;d++)this._indexes[d].name===a&&this._indexes.splice(d,1)}function r(a){if(this.mode!==f.VERSIONCHANGE){for(var b=!1,c=0;c<this.indexNames.length;c++)this.indexNames[c]===a&&(b=!0);b||n(this,{name:"NotFoundError"})}for(var d=0;d<this._indexes.length;d++)if(this._indexes[d].name===a)return this._indexes[d].objectStore=this,this._indexes[d];n(this,{name:"NotFoundError"})}function s(){return 0===this.__actions.length}return{get:i,add:k,put:j,createIndex:p,deleteIndex:q,index:r,__finished:s}}(),m.prototype=function(){function a(){}return{get:a}}(),n.only=function(a){if(!b(a))throw{name:"DataError"};return new n(a,a,!1,!1)},n.lowerBound=function(a,c){if(!b(a))throw{name:"DataError"};return new n(a,void 0,c?c:!1,!0)},n.upperBound=function(a,c){if(!b(a))throw{name:"DataError"};return new n(void 0,a,!0,c?c:!1)},n.bound=function(a,c,d,e){if(!b(a)||!b(c)||a>c||c===a&&e&&d)throw{name:"DataError"};return new n(a,c,d?d:!1,e?e:!1)},a.indexedDBmock=e,a.IDBCursormock=l,a.IDBDatabasemock=i,a.IDBTransactionmock=j,a.IDBObjectStoremock=k,a.IDBRequestmock=k,a.IDBIndexmock=m,a.IDBKeyRangemock=n,a.indexedDBmockDbs=d}(window||self);